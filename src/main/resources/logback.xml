<?xml version="1.0" encoding="UTF-8"?>
<configuration debug="true">
    <include resource="org/springframework/boot/logging/logback/base.xml"/>

    <appender name="smtp" class="ch.qos.logback.classic.net.SMTPAppender">
        <smtpHost>websmtp.world4you.com</smtpHost>
        <smtpPort>25</smtpPort>
        <username>alex@refugeescode.at</username>
        <password>refugeescode2016</password>
        <to>darioseidl@fastmail.fm</to>
        <from>alex@refugeescode.at</from>
        <layout class="ch.qos.logback.classic.html.HTMLLayout" />
        <cyclicBufferTracker class="ch.qos.logback.core.spi.CyclicBufferTracker">
            <bufferSize>1</bufferSize>
        </cyclicBufferTracker>
        <evaluator class="ch.qos.logback.classic.boolex.OnMarkerEvaluator">
            <marker>SEND_MAIL</marker>
        </evaluator>
    </appender>

    <appender name="slack" class="at.refugeescode.checkin.config.SlackAppender">
        <webhookURL>https://hooks.slack.com/services/xxxxxxxxx/xxxxxxxxx/xxxxxxxxxxxxxxxxxxxxxxxx</webhookURL>
        <channel>#general</channel>
        <layout class="ch.qos.logback.classic.PatternLayout">
            <pattern>%msg%n</pattern>
        </layout>
        <username>${HOSTNAME}</username>
        <icon>:briefcase:</icon>
        <evaluator class="ch.qos.logback.classic.boolex.OnMarkerEvaluator">
            <marker>POST_TO_SLACK</marker>
        </evaluator>
    </appender>
    <root>
        <appender-ref ref="smtp" />
        <appender-ref ref="slack" />
    </root>

</configuration>